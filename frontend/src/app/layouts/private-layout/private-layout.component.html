<div class="app-layout">
  <aside class="sidebar">
    <div class="logo">
      TAMARINDO
    </div>

    <nav class="nav-menu">
      <div class="nav-item-container">
        <a routerLink="/proyectos" routerLinkActive="active" class="nav-item parent" [class.active]="proyectoAbierto"
          (click)="toggleProyectos()">
          <span class="text">Proyectos</span>
        </a>

        <div class="submenu" [class.open]="proyectoAbierto">
          <a routerLink="/proyectos/crear" routerLinkActive="active" class="nav-item sub">
            <span class="text">Crear Proyecto</span>
          </a>
          <a routerLink="/proyectos/lista" routerLinkActive="active" class="nav-item sub">
            <span class="text">Consultar Lista de Proyectos</span>
          </a>
        </div>
      </div>

      <a routerLink="/clientes" routerLinkActive="active" class="nav-item">
        <span class="text">Clientes</span>
      </a>

      <div class="nav-item-container">
        <a routerLink="/inventario" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
          class="nav-item parent" [class.active]="inventarioAbierto" (click)="toggleInventario()">
          <span class="text">Inventario</span>
        </a>

        <div class="submenu" [class.open]="inventarioAbierto">
          <a routerLink="/inventario" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
            class="nav-item sub">
            <span class="text">Consultar Inventario</span>
          </a>
          <a routerLink="/inventario/catalogo" routerLinkActive="active" class="nav-item sub">
            <span class="text">Gesti√≥n de Insumos</span>
          </a>
          <a routerLink="/inventario/transferir" routerLinkActive="active" class="nav-item sub">
            <span class="text">Transferir Insumos</span>
          </a>
          <a routerLink="/inventario/movimientos" routerLinkActive="active" class="nav-item sub">
            <span class="text">Historial de Movimientos</span>
          </a>
        </div>
      </div>

      <a routerLink="/ubicaciones" routerLinkActive="active" class="nav-item">
        <span class="text">Ubicaciones</span>
      </a>

      <div class="nav-item-container">
        <div class="nav-item parent" [class.active]="reportesAbierto" (click)="toggleReportes()">
          <span class="text">Reportes</span>
        </div>

        <div class="submenu" [class.open]="reportesAbierto">
          <a routerLink="/reportes/proyectos" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Proyectos</span>
          </a>
          <a routerLink="/reportes/inventario" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Inventario</span>
          </a>
          <a routerLink="/reportes/calidad" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Calidad</span>
          </a>
          <a routerLink="/reportes/financiero" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte Financiero</span>
          </a>
          <a routerLink="/reportes/clientes" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Clientes</span>
          </a>
        </div>
      </div>

      <div class="nav-item-container">
        <div class="nav-item parent" [class.active]="usuariosAbierto" (click)="toggleUsuarios()">
          <span class="text">Usuarios</span>
        </div>

        <div class="submenu" [class.open]="usuariosAbierto">
          <a routerLink="/usuarios/internos" routerLinkActive="active" class="nav-item sub">
            <span class="text">Usuarios Internos</span>
          </a>
          <a routerLink="/usuarios/proveedores" routerLinkActive="active" class="nav-item sub">
            <span class="text">Proveedores</span>
          </a>
          <a routerLink="/usuarios/talleres" routerLinkActive="active" class="nav-item sub">
            <span class="text">Talleres Externos</span>
          </a>
        </div>
      </div>

      <a routerLink="/ordenes" routerLinkActive="active" class="nav-item">
        <span class="text">Ordenes de Compra</span>
      </a>
    </nav>

    <div class="user-profile">
      <div class="avatar">
        <img src="assets/avatar.jpg" alt="User"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="avatar-placeholder">{{ obtenerIniciales() }}</div>
      </div>
      <div class="user-info">
        <div class="user-name">{{ obtenerNombreUsuario() }}</div>
        <button class="logout-btn" (click)="cerrarSesion()" title="Cerrar sesion">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          <span>Cerrar sesion</span>
        </button>
      </div>
    </div>
  </aside>

  <main class="main-content">
    <router-outlet></router-outlet>
  </main>
</div>
