<div class="proyecto-card">
  <!-- HEADER -->
  <div class="card-header">
    <div class="codigo-prioridad">
      <span class="proyecto-codigo">{{ proyecto.codigoProyecto || 'Sin código' }}</span>
      <span class="badge-prioridad" [ngClass]="clasePrioridad">
        {{ proyecto.prioridad | titlecase }}
      </span>
    </div>
    <div class="cliente-nombre">{{ proyecto.clienteNombre }}</div>
  </div>

  <!-- NOMBRE DEL PROYECTO -->
  <div class="proyecto-nombre">
    {{ proyecto.nombreProyecto }}
  </div>

  <!-- PROGRESO GENERAL -->
  <div class="progreso-section">
    <div class="progreso-header">
      <span class="progreso-label">Progreso General</span>
      <span class="progreso-valor">{{ progresoGeneral }}%</span>
    </div>
    <div class="barra-progreso">
      <div class="barra-fill" 
           [style.width.%]="progresoGeneral"
           [class.completa]="progresoGeneral === 100"
           [class.en-progreso]="progresoGeneral > 0 && progresoGeneral < 100">
      </div>
    </div>
  </div>

  <!-- ESTADOS DE ÁREAS -->
  <div class="areas-estados">
    <div class="area-estado" 
         *ngFor="let area of AREAS"
         [class.completa]="estaCompleta(area)"
         [class.pendiente]="!estaCompleta(area) && !enProgreso(area)"
         [class.en-progreso]="enProgreso(area)">
      <div class="area-icon" [style.background-color]="area.color">
        <i class="fas" [ngClass]="area.icono"></i>
      </div>
      <div class="area-info">
        <span class="area-nombre">{{ area.nombreCorto }}</span>
        <span class="area-badge" 
              [ngClass]="{
                'badge-completado': estaCompleta(area),
                'badge-en-progreso': enProgreso(area),
                'badge-pendiente': !estaCompleta(area) && !enProgreso(area)
              }">
          {{ estaCompleta(area) ? 'Completado' : (enProgreso(area) ? 'En Progreso' : 'Pendiente') }}
        </span>
      </div>
      <div class="area-porcentaje" *ngIf="enProgreso(area)">
        {{ getAvanceArea(area.campo) }}%
      </div>
    </div>
  </div>

  <!-- INFO ADICIONAL -->
  <div class="info-adicional">
    <div class="info-item">
      <i class="fas fa-box"></i>
      <span>{{ proyecto.cantidadProducida || 0 }}/{{ proyecto.cantidadTotal }}</span>
    </div>
    <div class="info-item" *ngIf="proyecto.fechaFin">
      <i class="fas fa-calendar"></i>
      <span>{{ proyecto.fechaFin | date:'dd/MM/yyyy' }}</span>
    </div>
    <div class="info-item">
      <i class="fas fa-tasks"></i>
      <span>{{ resumenAreas.completadas }}/{{ AREAS.length }} áreas</span>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="card-footer">
    <button class="btn-ver-detalle" (click)="onVerDetalle()">
      <i class="fas fa-eye"></i>
      Ver Detalles
    </button>
  </div>
</div>